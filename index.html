<!DOCTYPE html>
<html>
<head>
<title>Train Station Matcher</title>
</head>
<body>
  <textarea id="longText" cols="50" rows="10" placeholder="Enter the long text here..."></textarea><br><br>
  <button onclick="findStation()">Find Station</button><br><br>
  <p id="result"></p>
  <p id="loadingStatus"></p>

  <script>
    async function findStation() {
      const longText = document.getElementById("longText").value.toLowerCase();
      const loadingStatusElement = document.getElementById("loadingStatus");

      try {
        loadingStatusElement.textContent = "Loading station list...";

        const stationListResponse = await fetch("./stations.txt");
        console.log("Station list response:", stationListResponse);

        const stationListText = await stationListResponse.text();
        console.log("Station list text:", stationListText);

        const stationList = stationListText.split("\n").map(station => station.trim().toLowerCase());
        console.log("Station list (processed):", stationList);

        loadingStatusElement.textContent = "";

        const foundStation = stationList.find(station => longText.includes(station));
        console.log("Found station:", foundStation);

        const resultElement = document.getElementById("result");

        if (foundStation) {
          resultElement.textContent = "Found station: " + foundStation;
        } else {
          resultElement.textContent = "No matching station found in the text.";
        }
      } catch (error) {
        console.error("Error fetching station list:", error);
        loadingStatusElement.textContent = "Error: Could not load station list.";
        resultElement.textContent = "";
      }
    }
  </script>
</body>
</html>
